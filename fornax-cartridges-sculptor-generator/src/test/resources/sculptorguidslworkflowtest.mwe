<workflow abstract="true">
	<!-- Need this to be able to import xtext models -->
	<bean class="org.eclipse.emf.mwe.utils.StandaloneSetup">
		<platformUri value=".."/> 	
		<!-- Register Sculptor dsl meta model -->
    	<registerGeneratedEPackage value="org.fornax.cartridges.sculptor.dsl.sculptordsl.SculptordslPackage"/>
    	<!-- Register Sculptor gui dsl meta model -->
    	<registerGeneratedEPackage value="org.fornax.cartridges.sculptor.gui.dsl.sculptorguidsl.SculptorguidslPackage"/>		
		<!-- Register Sculptor meta model -->
		<registerGeneratedEPackage value="sculptormetamodel.SculptormetamodelPackage"/>
    	<!-- Register Sculptor gui meta model -->
    	<registerGeneratedEPackage value="sculptorguimetamodel.SculptorguimetamodelPackage"/>    		
	</bean>	

	<!-- Load/reload generator properties -->
	<bean id="initProperties" class="org.fornax.cartridges.sculptor.generator.util.GeneratorProperties" />
    		
   	<component class="org.eclipse.xtext.MweReader" uri="${modelFile}">
		<!-- this class will be generated by the xtext generator -->
		<register class="org.fornax.cartridges.sculptor.dsl.SculptordslStandaloneSetup"/>		
		<register class="org.fornax.cartridges.sculptor.gui.dsl.SculptorguidslStandaloneSetup"/>
		<outputSlot value="guiDslModel"/>		
	</component>
    
    <!-- Model transformation from DSL meta model to meta model -->
    <component id="guidslTransformation" class="org.eclipse.xtend.XtendComponent">
    	<metaModel class="org.eclipse.xtend.typesystem.emf.EmfRegistryMetaModel"
        	useSingleGlobalResourceSet="true"/>
 	    <invoke value="transformation::GuiDslTransformation::transform(guiDslModel)"/>
        <outputSlot value="guiModel"/>
	</component>
</workflow>
