import "classpath:/library-person-gwt.btdesign"
import "classpath:/library-gwt.btdesign"

gui LibraryWeb for Library {

	Module for main {
		
		View Menu {
			contents {
				link mediaBrowseLink toView MediaBrowse {
					label = "Media Browse"
				}
				
				"Link to PersonForm view"
				link personLink toView PersonForm {
					label = "Person Form"
				}
				

			}
		}

	}
	
	Module for person {
		> @PersonService
		
		View PersonForm for Person {
			> @PersonService
			
			parameters {
				String command not nullable;
				Integer id nullable;
			}
			contents {
				inputText nameField forProperty name {
					label = "Name"
				}
				inputText birthDateField  { // forProperty birthDate
					label = "Birth Date"
				}
				
				listBox genderSelector forEnum Gender {
					label = "Gender"
				}
				
				listBox personSelector for Person {
					label = "Person"
				}
				
				table table1 {
					label = "Table uno"
				}
				
				button saveButton {
					label = "Save"
				}
				
				informationalText info1 {
					label = "Info Numero Uno"
				}
				
				informationalText fullName forOp getDisplayName {
					label = "Full name"
				}
				textArea textArea1 {
					label = "Text area uno"
				}
				
				autocomplete autocomp1 {
					label = "Auto complete one"
					onSelectItem=navigateToMediaBrowse
				}
			}
		}
		
		View TableView {
			hint="somehint"
			parameters {
				String param1;
			}
			contents {
				table personTable for Person {
					label="Person Table"
					
					enabled isTableEditable
					visible isTableEditable
					paging
//					size=20
					columns {
						name type=Text forOp getDisplayName filterable sortable;
						
						birthDate type=Date editable; // forProperty birthDate

						widget listBox genderSelector forEnum Gender {
							label = "Gender"
						}
						
						edit type=Button onClick=populatePersonDetailsPanel;
						

					}
				}
				
				panel personDetailsPanel {
					hint="paneltype=SimplePanel"
					contents {
						inputText nameField forProperty name {
							label = "Name"
						}
						inputText birthDateField  { // forProperty birthDate
							label = "Birth Date"
						}

					}
				}
				
				"this is an empty panel"
				panel personDetailsEmptyPanel {
					contents {
						
					}
				}
				
				custom customLink {
					label="Custom Link"
				}
			}
			"Populate the person details panel"
			UiBehavior PopulatePanel populatePersonDetailsPanel {
				panel=personDetailsPanel
			}
			"Populate the person details panel2"
			UiBehavior PopulatePanel populatePersonDetailsPanel2 {
				panel=personDetailsPanel
			}
			

			"Confirm the user wants to do something"
			UiBehavior ConfirmMessage confirmSomeMessage {
				message="Are you really sure you want to do this!?!?"
			}
		
			UiBehavior UpdateTable updatePersonTable {
				hint = "updateTableHint"
				table = personTable
			}
			
			UiBehavior Custom customPersonTableBehavior {
				hint="customhint"
			}

			Condition Custom isTableEditable {
				hint = "somehint2"
			}
			
		
			
		}
		
		
		"This is some MyEvent1 documentation"
		Event MyEvent1 {
			String attr1;
			
			"This is some documentation"
			Integer attr2;
			
			Date date1;
			
			DateTime dateTime1;
		}

		"Navigate"
		UiBehavior NavigateToView navigateToMediaBrowse {
			view=MediaBrowse
		}

		"Composite"
		UiBehavior Composite compositeBehavior {
			navigateToMediaBrowse
		}
		
		Condition Custom isAdministrator {
			hint = "somehint1"
		}
				
	}
	
	Module for media {
		basePackage = org.fornax.cartridges.sculptor.examples.library.mediaalt
		
		
		> @MediaService
		
		
		skip GameMedia
		
		View MediaBrowse {
			> @MediaService
			
			parameters {
				String libraryId;
			}

			contents {
				table libraryTable for Library {
					label="Library Table"
					
					columns {
						name type=Text;
					}
				}
				inputText libraryId {
					label = "Library ID"
				}

				inputText name {
					label = "Name"
				}

			}
		}
		
		
	}

}